<!doctype html>
<html lang="{{ current_language }}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title or t("app.title") }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <style>
      body { display: grid; grid-template-columns: 260px 1fr; min-height: 100vh; }
      aside { padding: 2rem 1.5rem; border-right: 1px solid #e5e7eb; background: #fafafa; }
      main { padding: 2rem 2.5rem; }
      .nav-link { display: flex; align-items: center; gap: 0.5rem; padding: 0.65rem 0.75rem; border-radius: 10px; color: inherit; text-decoration: none; }
      .nav-link:hover { background: #eef2ff; }
      .nav-link.active { background: #4f46e5; color: #fff; }
      .muted { color: #6b7280; }
      .badge { display: inline-block; padding: 0.15rem 0.55rem; border-radius: 999px; font-size: 0.85rem; background: #e0e7ff; color: #4338ca; }
      .stack { display: flex; flex-direction: column; gap: 0.75rem; }
      .row { display: flex; gap: 0.75rem; align-items: center; }
      .card { border: 1px solid #e5e7eb; border-radius: 14px; padding: 1.25rem 1.5rem; background: #fff; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04); }
      header.page-head { margin-bottom: 1.5rem; }
      header.page-head h1 { margin-bottom: 0.25rem; }
      ul.item-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 0.75rem; }
      ul.item-list li { border: 1px solid #e5e7eb; padding: 0.85rem 1rem; border-radius: 12px; }
      form.inline { display: flex; gap: 0.75rem; align-items: flex-end; flex-wrap: wrap; }
      form.inline label { min-width: 200px; }
      .pill { padding: 0.15rem 0.5rem; border-radius: 6px; background: #f3f4f6; }
    </style>
  </head>
  <body data-page="{{ page }}">
    <aside>
      <div class="stack">
        <div>
          <p class="muted">{{ t("app.navigation") }}</p>
          <h2 style="margin-bottom: 0">{{ t("app.brand") }}</h2>
        </div>
        <nav class="stack">
          <a class="nav-link" data-route="projects" href="{{ url_for('projects_page') }}">{{ t("nav.projects") }}</a>
          <a class="nav-link" data-route="templates" href="{{ url_for('templates_page') }}">{{ t("nav.templates") }}</a>
          <a class="nav-link" data-route="assets" href="{{ url_for('assets_page') }}">{{ t("nav.assets") }}</a>
          <a class="nav-link" data-route="settings" href="{{ url_for('settings_page') }}">{{ t("nav.settings") }}</a>
        </nav>
        <form id="language-switcher" class="stack" style="gap: 0.35rem">
          <label style="font-size: 0.9rem">{{ t("app.language") }}</label>
          <select name="lang" aria-label="{{ t('app.language') }}">
            {% for lang in available_languages %}
              <option value="{{ lang }}" {% if lang == current_language %}selected{% endif %}>{{ lang|upper }}</option>
            {% endfor %}
          </select>
        </form>
        <p class="muted" style="font-size: 0.9rem">{{ t("app.nav_hint") }}</p>
      </div>
    </aside>
    <main>
      {% block content %}{% endblock %}
    </main>
    <script>
      window.APP_LANG = "{{ current_language }}";
      window.I18N = {{ frontend_translations_json | safe }};
    </script>
    <script src="{{ url_for('static', filename='dashboard.js') }}" defer></script>
  </body>
</html>
