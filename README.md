# Gemini Sheet Builder

–°–µ—Ä–≤–∏—Å –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–º—Ç–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ç–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Gemini. Flask —Ç–µ–ø–µ—Ä—å –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ API –∏ —Ä–∞–∑–¥–∞—á—É —Å—Ç–∞—Ç–∏–∫–∏, –∞ UI —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ `frontend/` (Vite + React) –∏ –≤—ã–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ `static/`.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **API —Å–ª–æ–π –Ω–∞ Flask**: –≤—Å–µ —Ä–∞–±–æ—á–∏–µ —Ç–æ—á–∫–∏ –∏–º–µ—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å `/api/...`, —Ñ–∞–π–ª—ã –≤—ã–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `/assets/...`.
- **SPA —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥**: –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –ª–µ–∂–∞—Ç –≤ `frontend/`, —Å–±–æ—Ä–∫–∞ —Å–æ–∑–¥–∞—ë—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π bundle –≤ `static/` (–º–æ–∂–Ω–æ –æ—Ç–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ Flask –∏–ª–∏ CDN/–æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ).
- **–§–∞–π–ª—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–π**: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ PDF –ø–∏—à—É—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥ `SPAWNER_DATA_DIR` (–ø–æ
  —É–º–æ–ª—á–∞–Ω–∏—é `output/`, —Å–º. `src/storage.py`). –ù–∞ –ø—Ä–æ–¥–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—É—Ç—å –¥–æ
  –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ç–æ–º–∞ –≤–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ä–µ–ª–∏–∑–∞.

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ü–µ—Ä–µ–¥ –æ—Ç–¥–∞—á–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ `/assets/...` –∏–ª–∏ –≤—ã–≥—Ä—É–∑–∫–æ–π –≤ CDN —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –¥–∞–Ω–Ω—ã—Ö (`$SPAWNER_DATA_DIR`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `output/`) –Ω–µ—Ç –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∏–ª–∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ë—ã—Å—Ç—Ä–∞—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

```bash
ls -lh "$SPAWNER_DATA_DIR"            # –æ–±—â–∏–π —Å–ø–∏—Å–æ–∫
find "$SPAWNER_DATA_DIR" -maxdepth 2 -type f
```

–•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–ª–æ—Å–∫–æ–µ: —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ JSON‚Äë–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ª–µ–∂–∞—Ç –ø—Ä—è–º–æ –≤ `$SPAWNER_DATA_DIR`, –∞ —Å–ª—É–∂–µ–±–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –≤ `$SPAWNER_DATA_DIR/data/`. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–≤–µ–∂–∏–µ —Ñ–∞–π–ª—ã (–ø–æ –¥–∞—Ç–µ –∏–ª–∏ –ø—Ä–µ—Ñ–∏–∫—Å—É –∏–º–µ–Ω–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏), —É–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫/PDF –∏ —É–¥–∞–ª–∏—Ç–µ –ª–∏—à–Ω–µ–µ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π.

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –º–Ω–æ–≥–æ, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ—Ç

–ï—Å–ª–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≤–∏—Å–∏—Ç –æ—á–µ—Ä–µ–¥—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –±–µ–∑ –≥–æ—Ç–æ–≤—ã—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ï—Å—Ç—å –ª–∏ –∫–ª—é—á Gemini?** –í `/srv/websites/spawner/.env` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ `GEMINI_API_KEY=<–∫–ª—é—á>`. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–ª—é—á–∞ `/api/generate` –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É, –∞ –≤ –ª–æ–≥–∞—Ö gunicorn –ø–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ `API key is required`.
2. **–ï—Å—Ç—å –ª–∏ —Ñ–∞–π–ª—ã –≤ `$SPAWNER_DATA_DIR`?** –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `ls -lh "$SPAWNER_DATA_DIR" "$SPAWNER_DATA_DIR/data/"`. –ü—Ä–∏ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö SDK –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ JSON‚Äë–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ç—É—Ç. –ü—É—Å—Ç–æ–π –∫–∞—Ç–∞–ª–æ–≥ ‚Äî –ø—Ä–∏–∑–Ω–∞–∫ —Ç–æ–≥–æ, —á—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–µ –¥–æ—à–ª–∏ –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–æ—à–∏–±–∫–∞ —Å–µ—Ç–∏, –Ω–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á, –∫–≤–æ—Ç–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å).
3. **–°–æ—Å—Ç–æ—è–Ω–∏—è –≤ `$SPAWNER_DATA_DIR/data/generations.json`**. –ï—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏: —Å—Ç–∞—Ç—É—Å `error` –æ–∑–Ω–∞—á–∞–µ—Ç –æ—à–∏–±–∫—É –æ—Ç Gemini, `generating`/`regenerating` ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å. –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ñ–∞–π–ª –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è, —Ç–∞–∫ —á—Ç–æ –Ω–∞–∫–æ–ø–∏–≤—à–∏–µ—Å—è –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤–∏–¥–Ω—ã.
4. **–õ–æ–≥–∏ gunicorn**. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/var/log/syslog` –∏–ª–∏ –≤—ã–≤–æ–¥ `journalctl -u spawner.service -n 200` ‚Äî —Ç–∞–º –±—É–¥—É—Ç –ø—Ä–∏—á–∏–Ω—ã –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏, –Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–≤–æ—Ç—ã).
5. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç–∏–∫–∏ `/assets/...`**. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ nginx –∏–ª–∏ –¥—Ä—É–≥–æ–º –ø—Ä–æ–∫—Å–∏ –µ—Å—Ç—å –±–ª–æ–∫ `location /assets/ { proxy_pass http://127.0.0.1:8000; }`. –ë–µ–∑ –Ω–µ–≥–æ —Ñ–∞–π–ª—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –æ—Ç–¥–∞—Å—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.

## –ü–æ–ª–∏—Ç–∏–∫–∞ —Å—Ç–∞—Ç–∏–∫–∏ –∏ —Å–±–æ—Ä–∫–∏

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–∑ `frontend/` **—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ git**. –ü–µ—Ä–µ–¥ –ø—É—à–µ–º –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –ø–µ—Ä–µ—Å–±–æ—Ä:

```bash
cd frontend
npm ci
npm run build
cd ..
```

–ó–∞—Ç–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `static/` –Ω–µ—Ç –Ω–µ–ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```bash
git status --short static
```

–ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –Ω–µ –ø—É—Å—Ç, –¥–æ–±–∞–≤—å—Ç–µ –∏ –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ–ø–∞–¥–∞–µ—Ç —Å–≤–µ–∂–∞—è —Å—Ç–∞—Ç–∏–∫–∞ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏.

## –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ
1. **–°–æ–∑–¥–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # Windows: .venv\\Scripts\\activate
   pip install -r requirements.txt
   ```

2. **–°–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥** (–Ω—É–∂–µ–Ω Node.js 18+):
   ```bash
   cd frontend
   npm install
   npm run build  # —Å—Ç–∞—Ç–∏–∫–∞ –ø–æ–ø–∞–¥—ë—Ç –≤ ../static/
   cd ..
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä**:
   ```bash
   # FLASK_SECRET_KEY –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Å–µ—Å—Å–∏–π, GEMINI_API_KEY –º–æ–∂–Ω–æ –ø—Ä–æ–∫–∏–¥—ã–≤–∞—Ç—å –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
   export FLASK_SECRET_KEY=local-secret
   export GEMINI_API_KEY=<–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ>
   python -m src.app            # –∏–ª–∏ gunicorn -w 2 -b 0.0.0.0:8000 'src.app:create_app()'
   ```

4. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ SPA –æ—Ç–¥–µ–ª—å–Ω–æ**: –º–æ–∂–Ω–æ –≤–º–µ—Å—Ç–æ `npm run build` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `npm run dev` –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å proxy –≤ Vite –Ω–∞ `localhost:5000` (–∏–ª–∏ –ø–æ—Ä—Ç –∏–∑ `PORT`).

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

`.env` –ª–µ–∂–∏—Ç —Ä—è–¥–æ–º —Å –ø—Ä–æ–µ–∫—Ç–æ–º (–≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è/–ø–∞–ø–∫–∏ –¥–µ–ø–ª–æ—è) –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤ systemd —á–µ—Ä–µ–∑ `EnvironmentFile=` (—Å–º. –Ω–∏–∂–µ). –í Timeweb Cloud —ç—Ç–æ `/srv/websites/spawner/.env`.

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è         | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é             | –û–ø–∏—Å–∞–Ω–∏–µ |
| ------------------ | -------------- | ---------------------------------- | -------- |
| `FLASK_SECRET_KEY` | –¥–∞             | –Ω–µ—Ç                               | –°–µ–∫—Ä–µ—Ç –¥–ª—è —Å–µ—Å—Å–∏–π Flask. |
| `GEMINI_API_KEY`   | –Ω–µ—Ç            | –Ω–µ—Ç                               | –ö–ª—é—á Gemini –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é; –º–æ–∂–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö. |
| `SPAWNER_DATA_DIR` | –Ω–µ—Ç            | `output`                          | –ö–∞—Ç–∞–ª–æ–≥ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –∏ `output/data/*.json`. –ù–∞ –ø—Ä–æ–¥–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–º –≤–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ä–µ–ª–∏–∑–∞. |
| `PORT`             | –Ω–µ—Ç            | `5000,5001,5002` (–≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–π) | –°–ø–∏—Å–æ–∫ –ø–æ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π (–º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, `8000,5000`). |
| `ADMIN_EMAIL`      | –Ω–µ—Ç            | –Ω–µ—Ç                               | –õ–æ–≥–∏–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ `/api/auth/admin/ensure` –∏–ª–∏ –ø—Ä–∏ –∞–¥–º–∏–Ω-–ª–æ–≥–∏–Ω–µ. |
| `ADMIN_PASSWORD_HASH` | –Ω–µ—Ç         | –Ω–µ—Ç                               | –•–µ—à –ø–∞—Ä–æ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä –∏–∑ `python - <<'PY'\nfrom werkzeug.security import generate_password_hash; print(generate_password_hash('–ø–∞—Ä–æ–ª—å'))\nPY`. |
| `ADMIN_ACCESS_TOKEN` | –Ω–µ—Ç          | –Ω–µ—Ç                               | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤—ã –∞–¥–º–∏–Ω—Å–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è. |

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–¥ —Å–≤–æ—ë –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

### –ë–∞–∑–æ–≤—ã–π URL API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–ï—Å–ª–∏ SPA –æ—Ç–¥–∞—ë—Ç—Å—è –Ω–µ –∏–∑ –∫–æ—Ä–Ω—è –¥–æ–º–µ–Ω–∞ –∏–ª–∏ API –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –ø—Ä–µ—Ñ–∏–∫—Å–æ–º, –∑–∞–¥–∞–π—Ç–µ –±–∞–∑–æ–≤—ã–π URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ ‚Äî —ç—Ç–æ –∏–∑–±–∞–≤–∏—Ç –æ—Ç 404 –ø—Ä–∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ nginx –∏–ª–∏ –≤—ã–Ω–µ—Å–µ–Ω–∏–∏ API –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–º–µ–Ω.

- **–ü—Ä–∏ —Å–±–æ—Ä–∫–µ**: –ø–µ—Ä–µ–¥ `npm run build` —É–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `VITE_API_BASE` —Å –ø–æ–ª–Ω—ã–º –ø—É—Ç—ë–º –¥–æ API (–±–µ–∑ –∑–∞–≤–µ—Ä—à–∞—é—â–µ–≥–æ —Å–ª—ç—à–∞), –Ω–∞–ø—Ä–∏–º–µ—Ä:
  ```bash
  export VITE_API_BASE="https://example.com/custom/api"
  npm run build
  ```
- **–ë–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏**: –¥–æ–±–∞–≤—å—Ç–µ –≤ –æ—Ç–¥–∞–≤–∞–µ–º—ã–π `static/index.html` (–∏–ª–∏ —à–∞–±–ª–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç) —Å–∫—Ä–∏–ø—Ç —Å –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
  ```html
  <script>window.__API_BASE__ = "https://example.com/custom/api";</script>
  ```

–í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É origin/–ø—Ä–µ—Ñ–∏–∫—Å—É —Ä–∞–Ω—å—à–µ, —á–µ–º –∫ fallback `/api` –∏–ª–∏ `BASE_URL/api`.

> –ü—Ä–∏–º–µ—Ä –¥–ª—è Timeweb Cloud: –µ—Å–ª–∏ SPA –æ—Ç–¥–∞—ë—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É `https://example.timeweb.cloud/spawner/`, –∑–∞–¥–∞–π—Ç–µ `VITE_API_BASE="https://example.timeweb.cloud/spawner/api"` (–∏–ª–∏ –ø—Ä–æ–ø–∏—à–∏—Ç–µ `window.__API_BASE__`), —á—Ç–æ–±—ã –∑–∞–ø—Ä–æ—Å—ã –Ω–µ —É—Ö–æ–¥–∏–ª–∏ –≤ –∫–æ—Ä–µ–Ω—å –¥–æ–º–µ–Ω–∞.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

1. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ö–µ—à –ø–∞—Ä–æ–ª—è (`ADMIN_PASSWORD_HASH`) –∏ –∑–∞–¥–∞–π—Ç–µ –ª–æ–≥–∏–Ω (`ADMIN_EMAIL`) –≤ `.env`. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ —É–¥–æ–±–Ω—ã–π —Ç–æ–∫–µ–Ω (`ADMIN_ACCESS_TOKEN`) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–æ–ª—è.
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã Flask —É–≤–∏–¥–µ–ª –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
3. –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —É—á—ë—Ç–∫—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ `POST /api/auth/admin/ensure` ‚Äî –ø–µ—Ä–µ–¥–∞–π—Ç–µ –≤ —Ç–µ–ª–µ `{"token": "<ADMIN_ACCESS_TOKEN>"}` –∏–ª–∏ `{"password": "<–ø–∞—Ä–æ–ª—å>"}`. –≠–Ω–¥–ø–æ–∏–Ω—Ç –ø–æ–ª–æ–∂–∏—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ `data/users.json` (—Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç).
4. –î–ª—è –≤—Ö–æ–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ `POST /api/auth/admin/login` —Å —Ç–µ–º–∏ –∂–µ –ø–æ–ª—è–º–∏ (`token` –∏–ª–∏ `password`). –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –≤–µ—Ä–Ω—ë—Ç—Å—è `token` –∏ –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–±—ã—á–Ω—ã–π `/api/auth/login` —Ç–æ–∂–µ –ø—Ä–∏–º–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –µ—Å–ª–∏ –ª–æ–≥–∏–Ω —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `ADMIN_EMAIL` –∏ –ø–∞—Ä–æ–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ö–µ—à—É –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## –û—Å–Ω–æ–≤–Ω—ã–µ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `GET /api/status` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –≤—Å–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–º –∏ —Å–ø–∏—Å–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø—Ä—è–º—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ `/assets/...`.
- `POST /api/generate` ‚Äî —Ç–µ–ª–æ JSON `{api_key?, aspect_ratio, resolution, sheet_prompts: []}` + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ñ–∞–π–ª—ã.
- `POST /api/generations/<id>/images/<index>/regenerate` ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏.
- `POST /api/generations/<id>/images/<index>/approve` ‚Äî –æ—Ç–º–µ—Ç–∫–∞ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–µ–≥–æ—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
- `POST /api/generations/<id>/export_pdf` ‚Äî –æ—Ç–¥–∞—ë—Ç PDF –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫.
- `POST /api/channel/videos` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –≤–∏–¥–µ–æ YouTube-–∫–∞–Ω–∞–ª–∞.
- `POST /api/settings` –∏ `/api/settings/reference/remove` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –∏ –∫–ª—é—á–æ–º.

## –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Timeweb Cloud)
1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ**: Ubuntu 22.04+, `python3.11-venv`, Node.js 18+ (—É–¥–æ–±–Ω–æ —á–µ—Ä–µ–∑ `nvm`), –¥–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.
2. **–ó–∞–±—Ä–∞—Ç—å –∫–æ–¥ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   git clone git@github.com:RosTGs/SpawnerContent.git /srv/websites/spawner
   cd /srv/websites/spawner
   
   python3 -m venv .venv
   source .venv/bin/activate
   pip install -U pip
   pip install -r requirements.txt
   
   # –§—Ä–æ–Ω—Ç–µ–Ω–¥ —É–∂–µ —Å–æ–±—Ä–∞–Ω –∏ –ª–µ–∂–∏—Ç –≤ static/, –Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤—ã—Ö —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è—Ö
   # –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ git —Å—Ç–∞—Ç—É—Å –ø—É—Å—Ç:
   cd frontend
   npm ci
   npm run build
   cd ..
   git status --short static

   # –í .env —É–∫–∞–∂–∏—Ç–µ –≤–Ω–µ—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–º –≤–Ω–µ —Ä–µ–ª–∏–∑–∞)
   echo "SPAWNER_DATA_DIR=/srv/websites/spawner-data" >> .env

   # –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ JSON-—Ñ–∞–π–ª—ã –∏–∑ ./output/data –≤ –Ω–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥
   python deploy/migrate_output_data.py --dest "$SPAWNER_DATA_DIR"
  ```
  Bundle –ª—è–∂–µ—Ç –≤ `static/`. –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏–∫—É –Ω—É–∂–Ω–æ –æ—Ç–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ CDN/–æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Ç–∞–ª–æ–≥–∞ `static/` –∏ –≤—ã—Å—Ç–∞–≤—å—Ç–µ `base` –≤ `frontend/vite.config.js` –Ω–∞ URL CDN.
3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥** (–ø—Ä–∏–º–µ—Ä systemd unit):
   ```ini
   [Unit]
   Description=Gemini Sheet API
   After=network.target

   [Service]
   WorkingDirectory=/srv/websites/spawner
   EnvironmentFile=/srv/websites/spawner/.env
   ExecStart=/srv/websites/spawner/.venv/bin/gunicorn -w 2 -b 0.0.0.0:8000 'src.app:create_app()'
   Restart=always

   [Install]
   WantedBy=multi-user.target
   ```
   –†–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥ –∏ –ø—É—Ç–∏ –¥–æ `.venv`, `static/` –∏ `frontend/` –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –º–µ–∂–¥—É unit-—Ñ–∞–π–ª–æ–º –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π nginx (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–¥–∏–Ω—ã–π –∫–æ—Ä–µ–Ω—å `/srv/websites/spawner`).
   –ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `systemctl daemon-reload && systemctl enable --now spawner.service`.
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å reverse-proxy/Nginx** (–∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Ä—Ç—ã –ø–æ–¥ –≤–∞—à—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é). –ï—Å–ª–∏ —Å–∞–π—Ç –æ—Ç–∫—Ä—ã—Ç –ø–æ HTTPS, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–ª–æ–∫
   `location ^~ /static/` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ server:443 **–≤—ã—à–µ** SPA-—Ñ–æ–ª–ª–±–µ–∫–∞ `location /` ‚Äî –∏–Ω–∞—á–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `/static/assets/*.js`
   –ø–æ–ø–∞–¥—É—Ç –≤ fallback –∏ –±—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∏—Ç `index.html` –≤–º–µ—Å—Ç–æ JS (–ø—É—Å—Ç–æ–π —ç–∫—Ä–∞–Ω). –ü—Ä–∏–º–µ—Ä —Å HTTPS –∏ alias –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥ —Å–±–æ—Ä–∫–∏:
   ```nginx
   server {
       listen 80;
       server_name _;

       # –°—Ç–∞—Ç–∏–∫–∞ SPA –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ static/
       location ^~ /static/ {
           alias /srv/websites/spawner/static/;
           try_files $uri $uri/ =404;
       }

       # –§–∞–π–ª—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
       location /assets/ {
           proxy_pass http://127.0.0.1:8000;
       }

       # API —Å–ª–æ–π
       location /api/ {
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_pass http://127.0.0.1:8000;
       }

       # SPA fallback
       location / {
           try_files $uri $uri/ @flask;
       }

       # –ü—Ä–æ–∫—Å–∏—Ä—É–µ–º –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤–æ Flask
       location @flask {
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_pass http://127.0.0.1:8000;
       }
   }
   ```

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Nginx —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é, –∞ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–¥ `/api` –∏ `/assets` —É–π–¥—É—Ç –≤ Flask/Gunicorn. –ï—Å–ª–∏ –≤—ã –æ—Ç–¥–∞—ë—Ç–µ —Å—Ç–∞—Ç–∏–∫—É –∏–∑ CDN, —Ç–æ `/` –Ω—É–∂–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–æ Flask (–∫–∞–∫ –≤ –±–ª–æ–∫–µ `location @flask`) –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `index.html` —Å CDN; –ª–æ–∫–∞–ª—å–Ω—ã–π `/static/index.html` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

### –ü—Ä–∏–º–µ—Ä –±–æ–µ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx (Timeweb Cloud)

–ù–∞ –±–æ–µ–≤–æ–º –¥–æ–º–µ–Ω–µ `app3.rostislavmusienko.ru` –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω –ø–æ–ª—É—á–∞–ª—Å—è –∏–∑‚Äë–∑–∞ –Ω–µ–≤–µ—Ä–Ω–æ–π —Ä–∞–∑–¥–∞—á–∏ —Å—Ç–∞—Ç–∏–∫–∏. –†–∞–±–æ—á–∏–π –∫–æ–Ω—Ñ–∏–≥ –ø—Ä–∏–≤–µ–¥—ë–Ω –Ω–∏–∂–µ ‚Äî –æ–Ω –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ HTTPS, –æ—Ç–¥–∞—ë—Ç SPA –∏–∑ –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ `static/`, –∞ API –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –≤ gunicorn –Ω–∞ `127.0.0.1:8000`:

```nginx
server {
    listen 80;
    server_name app3.rostislavmusienko.ru;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl http2;
    server_name app3.rostislavmusienko.ru;

    ssl_certificate /etc/letsencrypt/live/app3.rostislavmusienko.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/app3.rostislavmusienko.ru/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    # Frontend (Vite)
    location ^~ /static/ {
        alias /srv/websites/spawner/static/;
        try_files $uri $uri/ =404;
        expires 7d;
    }

    # Backend API
    location ^~ /api/ {
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_pass http://127.0.0.1:8000;
    }

    # SPA fallback
    location / {
        try_files $uri /static/index.html;
    }
}
```

–í–∞–∂–Ω–æ: –ø—É—Ç—å `/srv/websites/spawner/static/` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É –∏–∑ `frontend/`, –∏–Ω–∞—á–µ –±—Ä–∞—É–∑–µ—Ä —É–≤–∏–¥–∏—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è **SpawnerContent** –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å–µ—Ä–≤–µ—Ä–µ.

### –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã

* üìÅ –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞: `/srv/websites/spawner`
* üêç Virtualenv: `/srv/websites/spawner/.venv`
* üåê –§—Ä–æ–Ω—Ç–µ–Ω–¥ (Vite): `/srv/websites/spawner/frontend`
* üì¶ –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: `/srv/websites/spawner/static`
* ‚öôÔ∏è Backend-—Å–µ—Ä–≤–∏—Å: `spawner.service`
* üåç –î–æ–º–µ–Ω: `https://app3.rostislavmusienko.ru`

---

### 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ç–∫—É

```bash
cd /srv/websites/spawner
git status -sb
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞ –Ω—É–∂–Ω–æ–π –≤–µ—Ç–∫–µ (–æ–±—ã—á–Ω–æ `main`).

---

### 2. –ü–æ–¥—Ç—è–Ω—É—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git pull origin main
```

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∞—è –≤–µ—Ç–∫–∞ ‚Äî –ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ –µ—ë –∏–º—è.

---

### 3. –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

–°—Ç–∞—Ç–∏–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ git –∏ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤–º–µ—Å—Ç–µ —Å –∫–æ–º–º–∏—Ç–æ–º. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `static/` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º.

#### Backend (Python)

```bash
source .venv/bin/activate
pip install -r requirements.txt
```

#### Frontend (Vite / React)

```bash
cd frontend
export VITE_API_BASE="https://example.timeweb.cloud/spawner/api"
npm install       # –∏–ª–∏ npm ci
npm run build
cd ..
git status --short static
```

> ‚ö†Ô∏è –í —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ `vite.config.js` –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫, —á—Ç–æ –±–∏–ª–¥ –∫–ª–∞–¥—ë—Ç—Å—è –≤ `../static/`.

–ï—Å–ª–∏ `git status` –≤—ã–≤–æ–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `static/`, –æ–±–Ω–æ–≤–∏—Ç–µ —ç—Ç–∏ —Ñ–∞–π–ª—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, —á—Ç–æ–±—ã —Å–ª–µ–¥—É—é—â–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–¥–µ—Ä–∂–∞–ª–∞ —Å–≤–µ–∂—É—é —Å–±–æ—Ä–∫—É.

---

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend-—Å–µ—Ä–≤–∏—Å

```bash
systemctl restart spawner.service
systemctl status spawner.service --no-pager
```

–õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞:

```bash
journalctl -u spawner.service -n 100 --no-pager
```

---

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

* üåê –°–∞–π—Ç:
  `https://app3.rostislavmusienko.ru/`
* üîå API (–ø—Ä–∏–º–µ—Ä):

  ```bash
  curl -I https://app3.rostislavmusienko.ru/api/
  ```

---

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

* –°—Ç–∞—Ç–∏–∫–∞ –æ—Ç–¥–∞—ë—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ **nginx** –∏–∑ `/srv/websites/spawner/static`
* Backend —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ **gunicorn + systemd**
* –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è CDN ‚Äî –∫–∞—Ç–∞–ª–æ–≥ `static/` –º–æ–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ, –∞ `base` –≤ `vite.config.js` –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ URL CDN
